#!/usr/bin/env python3
import json
from web3 import Web3


# Set up web3 connection with Ganache
ganache_url = 'HTTP://127.0.0.1:7545'
web3 = Web3(Web3.HTTPProvider(ganache_url))
address = '0xF6d4bA9487542c2FF012b8890F2AF3fA46065c5c'
private_key = '0x4132db49246a043df5992d7b8164e2e760c2dc107ac6119eed6b1091f14e95ec'

def create_contract(abi, bytecode):
    Greeter = web3.eth.contract(abi=abi, bytecode=bytecode)

    # Submit the transaction that deploys the contract
    tx_hash = Greeter.constructor().transact({'from': web3.eth.default_account})

    # Wait for the transaction to be mined, and get the transaction receipt
    tx_receipt = web3.eth.wait_for_transaction_receipt(tx_hash)

    # Create the contract instance with the newly-deployed address
    contract = web3.eth.contract(
        address=tx_receipt.contractAddress,
        abi=abi,
    )

    return contract

def transact(func, contract, in1, in2):

    nonce = web3.eth.get_transaction_count(address)

    tx_det = {
        'nonce': nonce,
        'value': web3.to_wei(1, 'ether'),
        'gas': 2000000,
        'gasPrice': web3.to_wei('50', 'gwei'),
    }
    '''
    {
    'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
    'data': '0x7cf5dab00000000000000000000000000000000000000000000000000000000000000005',
    'value': 1,
    'gas': 43242,
    'maxFeePerGas': 2000000000,
    'maxPriorityFeePerGas': 1000000000,
    'chainId': 1
    }
    '''
    tx = contract.functions[func](in1, in2, 0x1.to_bytes()).build_transaction(tx_det)
    signed_tx = web3.eth.account.sign_transaction(tx, private_key=private_key)

    tx_hash = web3.eth.send_raw_transaction(signed_tx.rawTransaction)
    
    tx_receipt = web3.eth.wait_for_transaction_receipt(tx_hash)

    return tx_receipt

def call(func, contract):
    return contract.functions[func]().call()

def __main__():

    #test contract info
    #abi = json.loads('[{"constant":false,"inputs":[{"name":"_greeting","type":"string"}],"name":"setGreeting","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"greet","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"greeting","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]')
    #bytecode = "6060604052341561000f57600080fd5b6040805190810160405280600581526020017f48656c6c6f0000000000000000000000000000000000000000000000000000008152506000908051906020019061005a929190610060565b50610105565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a157805160ff19168380011785556100cf565b828001600101855582156100cf579182015b828111156100ce5782518255916020019190600101906100b3565b5b5090506100dc91906100e0565b5090565b61010291905b808211156100fe5760008160009055506001016100e6565b5090565b90565b61041a806101146000396000f300606060405260043610610057576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063a41368621461005c578063cfae3217146100b9578063ef690cc014610147575b600080fd5b341561006757600080fd5b6100b7600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506101d5565b005b34156100c457600080fd5b6100cc6101ef565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561010c5780820151818401526020810190506100f1565b50505050905090810190601f1680156101395780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015257600080fd5b61015a610297565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561019a57808201518184015260208101905061017f565b50505050905090810190601f1680156101c75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600090805190602001906101eb929190610335565b5050565b6101f76103b5565b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561028d5780601f106102625761010080835404028352916020019161028d565b820191906000526020600020905b81548152906001019060200180831161027057829003601f168201915b5050505050905090565b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561032d5780601f106103025761010080835404028352916020019161032d565b820191906000526020600020905b81548152906001019060200180831161031057829003601f168201915b505050505081565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061037657805160ff19168380011785556103a4565b828001600101855582156103a4579182015b828111156103a3578251825591602001919060010190610388565b5b5090506103b191906103c9565b5090565b602060405190810160405280600081525090565b6103eb91905b808211156103e75760008160009055506001016103cf565b5090565b905600a165627a7a7230582006f39b9b9b558a328403f9c048af30519c79e6536660d7660e8002af27f240930029"
    abi = json.loads('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ApprovalCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"ApprovalQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"BalanceQueryForZeroAddress","type":"error"},{"inputs":[],"name":"MintERC2309QuantityExceedsLimit","type":"error"},{"inputs":[],"name":"MintToZeroAddress","type":"error"},{"inputs":[],"name":"MintZeroQuantity","type":"error"},{"inputs":[],"name":"OwnerQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"OwnershipNotInitializedForExtraData","type":"error"},{"inputs":[],"name":"TransferCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"TransferFromIncorrectOwner","type":"error"},{"inputs":[],"name":"TransferToNonERC721ReceiverImplementer","type":"error"},{"inputs":[],"name":"TransferToZeroAddress","type":"error"},{"inputs":[],"name":"URIQueryForNonexistentToken","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"fromTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"toTokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"ConsecutiveTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"KONQUEST_PRICE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"KONQUEST_PROVENANCE","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PURCHASE_PER_ONCE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"REVEAL_TIMESTAMP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SALE_START_TIMESTAMP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SALE_WHITELIST_A_TIMESTAMP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SALE_WHITELIST_B_TIMESTAMP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"emergencySetStartingIndexBlock","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"flipSaleState","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"konquestIsReserved","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"numberOfTokens","type":"uint256"},{"internalType":"uint8","name":"tier","type":"uint8"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"mintKonquest","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reserveKonquests","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"saleIsActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"baseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"provenanceHash","type":"string"}],"name":"setProvenanceHash","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setStartingIndex","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"tier","type":"uint8"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"setTimestamp","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"startingIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"startingIndexBlock","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"tier","type":"uint8"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"verifySignatureMatchTierAndSender","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')
    #bytecode = '6080604052600436106102305760003560e01c806370a082311161012e578063c87b56dd116100ab578063e98665501161006f578063e98665501461060a578063e9dcc14b1461061f578063eb8d244414610634578063eec572bf14610653578063f2fde38b1461067357600080fd5b8063c87b56dd14610562578063cb774d4714610582578063e36d649814610598578063e981a7b7146105ae578063e985e9c5146105c157600080fd5b8063946807fd116100f2578063946807fd146104ea57806395d89b4114610500578063a22cb46514610515578063b48a53cf14610535578063b88d4fde1461054f57600080fd5b806370a0823114610462578063715018a6146104825780637d17fcbe146104975780638c7e7df7146104ac5780638da5cb5b146104cc57600080fd5b80631fe5e05f116101bc57806335675c401161018057806335675c40146103e557806342842e0e146103fa578063474071561461040d57806355f804b3146104225780636352211e1461044257600080fd5b80631fe5e05f1461036757806323b872dd1461037d5780632e1a7d4d146103905780632f745c59146103b057806334918dfd146103d057600080fd5b8063095ea7b311610203578063095ea7b3146102ed578063109695231461030257806318160ddd1461032257806318e20a381461033b5780631e4a926b1461035157600080fd5b806301ffc9a71461023557806306aa9e4a1461026a57806306fdde0314610293578063081812fc146102b5575b600080fd5b34801561024157600080fd5b50610255610250366004611bab565b610693565b60405190151581526020015b60405180910390f35b34801561027657600080fd5b50610285668e1bc9bf04000081565b604051908152602001610261565b34801561029f57600080fd5b506102a86106e5565b6040516102619190611c18565b3480156102c157600080fd5b506102d56102d0366004611c2b565b610777565b6040516001600160a01b039091168152602001610261565b6103006102fb366004611c60565b6107bb565b005b34801561030e57600080fd5b5061030061031d366004611d16565b61085b565b34801561032e57600080fd5b5060015460005403610285565b34801561034757600080fd5b50610285600c5481565b34801561035d57600080fd5b5061028560095481565b34801561037357600080fd5b50610285600a5481565b61030061038b366004611d5f565b610873565b34801561039c57600080fd5b506103006103ab366004611c2b565b610a18565b3480156103bc57600080fd5b506102856103cb366004611c60565b610a4d565b3480156103dc57600080fd5b50610300610a76565b3480156103f157600080fd5b50610300610a9b565b610300610408366004611d5f565b610b16565b34801561041957600080fd5b50610285600181565b34801561042e57600080fd5b5061030061043d366004611d9b565b610b36565b34801561044e57600080fd5b506102d561045d366004611c2b565b610b4b565b34801561046e57600080fd5b5061028561047d366004611e0d565b610b56565b34801561048e57600080fd5b50610300610ba5565b3480156104a357600080fd5b50610300610bb9565b3480156104b857600080fd5b506103006104c7366004611e39565b610c17565b3480156104d857600080fd5b506008546001600160a01b03166102d5565b3480156104f657600080fd5b50610285600b5481565b34801561050c57600080fd5b506102a8610c9a565b34801561052157600080fd5b50610300610530366004611e55565b610ca9565b34801561054157600080fd5b50600e546102559060ff1681565b61030061055d366004611eb1565b610d15565b34801561056e57600080fd5b506102a861057d366004611c2b565b610d5f565b34801561058e57600080fd5b5061028560135481565b3480156105a457600080fd5b5061028560125481565b6103006105bc366004611f19565b610de2565b3480156105cd57600080fd5b506102556105dc366004611f70565b6001600160a01b03918216600090815260076020908152604080832093909416825291909152205460ff1690565b34801561061657600080fd5b506103006111c9565b34801561062b57600080fd5b506102a86112cf565b34801561064057600080fd5b50600e5461025590610100900460ff1681565b34801561065f57600080fd5b5061025561066e366004611fa3565b61135d565b34801561067f57600080fd5b5061030061068e366004611e0d565b61149c565b60006301ffc9a760e01b6001600160e01b0319831614806106c457506380ac58cd60e01b6001600160e01b03198316145b806106df5750635b5e139f60e01b6001600160e01b03198316145b92915050565b6060600280546106f490611ff1565b80601f016020809104026020016040519081016040528092919081815260200182805461072090611ff1565b801561076d5780601f106107425761010080835404028352916020019161076d565b820191906000526020600020905b81548152906001019060200180831161075057829003601f168201915b5050505050905090565b600061078282611515565b61079f576040516333d1c03960e21b815260040160405180910390fd5b506000908152600660205260409020546001600160a01b031690565b60006107c682610b4b565b9050336001600160a01b038216146107ff576107e281336105dc565b6107ff576040516367d9dca160e11b815260040160405180910390fd5b60008281526006602052604080822080546001600160a01b0319166001600160a01b0387811691821790925591518593918516917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a4505050565b61086361153c565b600d61086f8282612071565b5050565b600061087e82611596565b9050836001600160a01b0316816001600160a01b0316146108b15760405162a1148160e81b815260040160405180910390fd5b60008281526006602052604090208054338082146001600160a01b038816909114176108fe576108e186336105dc565b6108fe57604051632ce44b5f60e11b815260040160405180910390fd5b6001600160a01b03851661092557604051633a954ecd60e21b815260040160405180910390fd5b801561093057600082555b6001600160a01b038681166000908152600560205260408082208054600019019055918716808252919020805460010190554260a01b17600160e11b17600085815260046020526040812091909155600160e11b841690036109c2576001840160008181526004602052604081205490036109c05760005481146109c05760008181526004602052604090208490555b505b83856001600160a01b0316876001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610a1086868660016115fd565b505050505050565b610a2061153c565b604051339082156108fc029083906000818181858888f1935050505015801561086f573d6000803e3d6000fd5b6001600160a01b0382166000908152601160205260408120610a6f9083611679565b9392505050565b610a7e61153c565b600e805461ff001981166101009182900460ff1615909102179055565b610aa361153c565b600e5460ff1615610afb5760405162461bcd60e51b815260206004820152601c60248201527f4b6f6e717565737420697320616c72656164792072657365727665640000000060448201526064015b60405180910390fd5b610b073361012b611685565b600e805460ff19166001179055565b610b3183838360405180602001604052806000815250610d15565b505050565b610b3e61153c565b600f610b31828483612131565b60006106df82611596565b60006001600160a01b038216610b7f576040516323d3ad8160e21b815260040160405180910390fd5b506001600160a01b031660009081526005602052604090205467ffffffffffffffff1690565b610bad61153c565b610bb7600061169f565b565b610bc161153c565b60135415610c115760405162461bcd60e51b815260206004820152601d60248201527f5374617274696e6720696e64657820697320616c7265616479207365740000006044820152606401610af2565b43601255565b610c1f61153c565b8160ff16600103610c305760095550565b8160ff16600203610c4157600a5550565b8160ff16600303610c5257600b5550565b8160ff16600403610c6357600c5550565b60405162461bcd60e51b815260206004820152600c60248201526b24b73b30b634b2103a34b2b960a11b6044820152606401610af2565b6060600380546106f490611ff1565b3360008181526007602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b610d20848484610873565b6001600160a01b0383163b15610d5957610d3c848484846116f1565b610d59576040516368d2bf6b60e11b815260040160405180910390fd5b50505050565b6060610d6a82611515565b610d8757604051630a14c4b560e41b815260040160405180910390fd5b6000610d916117dd565b90508051600003610db15760405180602001604052806000815250610a6f565b80610dbb846117ec565b604051602001610dcc9291906121f1565b6040516020818303038152906040529392505050565b600e54610100900460ff16610e2e5760405162461bcd60e51b815260206004820152601260248201527153616c65206973206e6f742061637469766560701b6044820152606401610af2565b3360009081526010602052604090205460ff1615610e8e5760405162461bcd60e51b815260206004820152601960248201527f43616c6c65722068617320616c7265616479206d696e746564000000000000006044820152606401610af2565b8160ff1660011480610ea357508160ff166002145b15610efe57610eb2828261135d565b610efe5760405162461bcd60e51b815260206004820152601e60248201527f43616c6c6572206973206e6f7420696e207468652077686974656c69737400006044820152606401610af2565b8160ff16600103610f6c57600954421015610f675760405162461bcd60e51b8152602060048201526024808201527f53616c6520686173206e6f74207374617274656420666f722077686974656c696044820152637374204160e01b6064820152608401610af2565b61103e565b8160ff16600203610fd557600a54421015610f675760405162461bcd60e51b8152602060048201526024808201527f53616c6520686173206e6f74207374617274656420666f722077686974656c6960448201526339ba102160e11b6064820152608401610af2565b8160ff16600303610c6357600b54421015610f675760405162461bcd60e51b8152602060048201526024808201527f53616c6520686173206e6f74207374617274656420666f72207075626c69632060448201526373616c6560e01b6064820152608401610af2565b600183111561108f5760405162461bcd60e51b815260206004820152601f60248201527f43616e206f6e6c79206d696e74203120746f6b656e20617420612074696d65006044820152606401610af2565b6103e7836110a06001546000540390565b6110aa9190612236565b111561110e5760405162461bcd60e51b815260206004820152602d60248201527f507572636861736520776f756c6420657863656564206d617820737570706c7960448201526c206f66204b6f6e71756573747360981b6064820152608401610af2565b3461112084668e1bc9bf040000612249565b111561116e5760405162461bcd60e51b815260206004820152601f60248201527f45746865722076616c75652073656e74206973206e6f7420636f7272656374006044820152606401610af2565b6111783384611685565b336000908152601060205260409020805460ff191660011790556012541580156111bb57506103e76111ad6001546000540390565b14806111bb5750600c544210155b15610b315743601255505050565b601354156112195760405162461bcd60e51b815260206004820152601d60248201527f5374617274696e6720696e64657820697320616c7265616479207365740000006044820152606401610af2565b60125460000361126b5760405162461bcd60e51b815260206004820181905260248201527f5374617274696e6720696e64657820626c6f636b206d757374206265207365746044820152606401610af2565b60125461127c906103e79040612268565b60135560125460ff9061128f904361228a565b11156112b2576103e76112a360014361228a565b6112ae919040612268565b6013555b601354600003610bb7576013546112ca906001612236565b601355565b600d80546112dc90611ff1565b80601f016020809104026020016040519081016040528092919081815260200182805461130890611ff1565b80156113555780601f1061132a57610100808354040283529160200191611355565b820191906000526020600020905b81548152906001019060200180831161133857829003601f168201915b505050505081565b604080513360601b6bffffffffffffffffffffffff191660208083019190915260f885901b6001600160f81b0319166034830152825160158184030181526035830184528051908201207f19457468657265756d205369676e6564204d6573736167653a0a3332000000006055840152607180840182905284518085039091018152609190930190935281519101206000919060008060006113fe87611830565b925092509250600060018583868660405160008152602001604052604051611442949392919093845260ff9290921660208401526040830152606082015260800190565b6020604051602081039080840390855afa158015611464573d6000803e3d6000fd5b5050506020604051035190506114826008546001600160a01b031690565b6001600160a01b0391821691161498975050505050505050565b6114a461153c565b6001600160a01b0381166115095760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610af2565b6115128161169f565b50565b60008054821080156106df575050600090815260046020526040902054600160e01b161590565b6008546001600160a01b03163314610bb75760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610af2565b6000816000548110156115e45760008181526004602052604081205490600160e01b821690036115e2575b80600003610a6f5750600019016000818152600460205260409020546115c1565b505b604051636f96cda160e11b815260040160405180910390fd5b60005b81811015611672576116336116158285612236565b6001600160a01b0387166000908152601160205260409020906118a4565b5061165f6116418285612236565b6001600160a01b0386166000908152601160205260409020906118b0565b508061166a8161229d565b915050611600565b5050505050565b6000610a6f83836118bc565b61086f8282604051806020016040528060008152506118e6565b600880546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b604051630a85bd0160e11b81526000906001600160a01b0385169063150b7a02906117269033908990889088906004016122b6565b6020604051808303816000875af1925050508015611761575060408051601f3d908101601f1916820190925261175e918101906122f3565b60015b6117bf573d80801561178f576040519150601f19603f3d011682016040523d82523d6000602084013e611794565b606091505b5080516000036117b7576040516368d2bf6b60e11b815260040160405180910390fd5b805181602001fd5b6001600160e01b031916630a85bd0160e11b1490505b949350505050565b6060600f80546106f490611ff1565b606060a06040510180604052602081039150506000815280825b600183039250600a81066030018353600a9004806118065750819003601f19909101908152919050565b600080600083516041146118865760405162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606401610af2565b50505060208101516040820151606090920151909260009190911a90565b6000610a6f838361194c565b6000610a6f8383611a3f565b60008260000182815481106118d3576118d3612310565b9060005260206000200154905092915050565b6118f08383611a8e565b6001600160a01b0383163b15610b31576000548281035b61191a60008683806001019450866116f1565b611937576040516368d2bf6b60e11b815260040160405180910390fd5b81811061190757816000541461167257600080fd5b60008181526001830160205260408120548015611a3557600061197060018361228a565b85549091506000906119849060019061228a565b90508181146119e95760008660000182815481106119a4576119a4612310565b90600052602060002001549050808760000184815481106119c7576119c7612310565b6000918252602080832090910192909255918252600188019052604090208390555b85548690806119fa576119fa612326565b6001900381819060005260206000200160009055905585600101600086815260200190815260200160002060009055600193505050506106df565b60009150506106df565b6000818152600183016020526040812054611a86575081546001818101845560008481526020808220909301849055845484825282860190935260409020919091556106df565b5060006106df565b6000805490829003611ab35760405163b562e8dd60e01b815260040160405180910390fd5b6001600160a01b03831660008181526005602090815260408083208054680100000000000000018802019055848352600490915281206001851460e11b4260a01b178317905582840190839083907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8180a4600183015b818114611b6257808360007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef600080a4600101611b2a565b5081600003611b8357604051622e076360e81b815260040160405180910390fd5b6000908155610b3191508483856115fd565b6001600160e01b03198116811461151257600080fd5b600060208284031215611bbd57600080fd5b8135610a6f81611b95565b60005b83811015611be3578181015183820152602001611bcb565b50506000910152565b60008151808452611c04816020860160208601611bc8565b601f01601f19169290920160200192915050565b602081526000610a6f6020830184611bec565b600060208284031215611c3d57600080fd5b5035919050565b80356001600160a01b0381168114611c5b57600080fd5b919050565b60008060408385031215611c7357600080fd5b611c7c83611c44565b946020939093013593505050565b634e487b7160e01b600052604160045260246000fd5b600067ffffffffffffffff80841115611cbb57611cbb611c8a565b604051601f8501601f19908116603f01168101908282118183101715611ce357611ce3611c8a565b81604052809350858152868686011115611cfc57600080fd5b858560208301376000602087830101525050509392505050565b600060208284031215611d2857600080fd5b813567ffffffffffffffff811115611d3f57600080fd5b8201601f81018413611d5057600080fd5b6117d584823560208401611ca0565b600080600060608486031215611d7457600080fd5b611d7d84611c44565b9250611d8b60208501611c44565b9150604084013590509250925092565b60008060208385031215611dae57600080fd5b823567ffffffffffffffff80821115611dc657600080fd5b818501915085601f830112611dda57600080fd5b813581811115611de957600080fd5b866020828501011115611dfb57600080fd5b60209290920196919550909350505050565b600060208284031215611e1f57600080fd5b610a6f82611c44565b803560ff81168114611c5b57600080fd5b60008060408385031215611e4c57600080fd5b611c7c83611e28565b60008060408385031215611e6857600080fd5b611e7183611c44565b915060208301358015158114611e8657600080fd5b809150509250929050565b600082601f830112611ea257600080fd5b610a6f83833560208501611ca0565b60008060008060808587031215611ec757600080fd5b611ed085611c44565b9350611ede60208601611c44565b925060408501359150606085013567ffffffffffffffff811115611f0157600080fd5b611f0d87828801611e91565b91505092959194509250565b600080600060608486031215611f2e57600080fd5b83359250611f3e60208501611e28565b9150604084013567ffffffffffffffff811115611f5a57600080fd5b611f6686828701611e91565b9150509250925092565b60008060408385031215611f8357600080fd5b611f8c83611c44565b9150611f9a60208401611c44565b90509250929050565b60008060408385031215611fb657600080fd5b611fbf83611e28565b9150602083013567ffffffffffffffff811115611fdb57600080fd5b611fe785828601611e91565b9150509250929050565b600181811c9082168061200557607f821691505b60208210810361202557634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610b3157600081815260208120601f850160051c810160208610156120525750805b601f850160051c820191505b81811015610a105782815560010161205e565b815167ffffffffffffffff81111561208b5761208b611c8a565b61209f816120998454611ff1565b8461202b565b602080601f8311600181146120d457600084156120bc5750858301515b600019600386901b1c1916600185901b178555610a10565b600085815260208120601f198616915b82811015612103578886015182559484019460019091019084016120e4565b50858210156121215787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b67ffffffffffffffff83111561214957612149611c8a565b61215d836121578354611ff1565b8361202b565b6000601f84116001811461219157600085156121795750838201355b600019600387901b1c1916600186901b178355611672565b600083815260209020601f19861690835b828110156121c257868501358255602094850194600190920191016121a2565b50868210156121df5760001960f88860031b161c19848701351681555b505060018560011b0183555050505050565b60008351612203818460208801611bc8565b835190830190612217818360208801611bc8565b01949350505050565b634e487b7160e01b600052601160045260246000fd5b808201808211156106df576106df612220565b600081600019048311821515161561226357612263612220565b500290565b60008261228557634e487b7160e01b600052601260045260246000fd5b500690565b818103818111156106df576106df612220565b6000600182016122af576122af612220565b5060010190565b6001600160a01b03858116825284166020820152604081018390526080606082018190526000906122e990830184611bec565b9695505050505050565b60006020828403121561230557600080fd5b8151610a6f81611b95565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052603160045260246000fdfea2646970667358221220c47466dec00afa329d29f948f7d22b87e2c745df4422616b497405a5ce65fee664736f6c63430008100033'

    #web3.eth.defaultAccount = '0xF6d4bA9487542c2FF012b8890F2AF3fA46065c5c'
    web3.eth.default_account = web3.eth.accounts[0]

    # Create test contract
    #contract = create_contract(abi, bytecode)
    #contract_address = contract.address
    
    contract = web3.eth.contract(
        address='0xC6eE14870F6f0eeB78117ecA6E1A103bFeabfEe8',
        abi=abi,
    )

    contract_funcs = ['greet', 'setGreeting', 'mintKonquest']

    '''
    # Display the default greeting from the contract
    print('Default contract greeting: {}'.format(
        call(contract_funcs[0], contract)
    ))
    '''

    tx_receipt = transact(contract_funcs[2], contract, 1, 1)

    '''# Display the new greeting value
    print('Updated contract greeting: {}'.format(
        call(contract_funcs[0], contract)
    ))'''

    print(tx_receipt)
    print(tx_receipt['status'])


if __name__ == '__main__':
    __main__()
